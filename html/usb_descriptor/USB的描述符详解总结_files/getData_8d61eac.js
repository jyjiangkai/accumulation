define("wkview:widget/commerce/knowledge/getData.js",function(e,t,a){function r(){var e=s.get("WkInfo").DocInfo||{},t=e.title||"";return t}function o(e,t,a){var o=new $.Deferred,n={url:location.href,query:r(),eidstr:e};return t&&(n.essQuery=t),d.xsend(1,102596,{index:0,des:"req"}),$.ajax({url:"/ndview/interface/hx/zsyx",dataType:"json",data:n,success:function(e){if(e.status&&0===e.status.code){for(u=e.data,$.map(e.data,function(e){g.push(+e.adPlaceId),+e.adPlaceId===a&&o.resolve(e.adPlaceData)});f.length>0;){var t=f.pop();t.defer.resolve(g.indexOf(+t.srcId)>-1?e.data[+t.srcId].adPlaceData:{})}v=!0}else{for(var r=e.status&&e.status.code||-1;f.length>0;){var t=f.pop();t.defer.resolve(r)}o.resolve(r)}l=2},fail:function(){for(;f.length>0;){var e=f.pop();e.defer.resolve(-1)}o.resolve(-1)}}),o}var n,s=e("wkcommon:widget/lib/fis/data/data.js"),d=e("wkcommon:widget/ui/js_core/log/log.js"),i=e("wkcommon:widget/ess/getEssQuery.js"),c=e("wkview:widget/commerce/knowledge/zsFlowData.js"),l=0,f=[],u=null,v=!1,w=[2147,2148,2149],g=[],p=function(){if(u){for(var e=0;e<w.length;e++)u[w[e]]&&u[w[e]].adPlaceJs&&(n="<script>"+u[w[e]].adPlaceJs+"</script>");return n?void $("body").append(n):void 0}},m=function(e){var t=new $.Deferred,a=50002,r=c.getZsFlowEid();if(!r||60103===+r)return t.resolve({}),t;if(a=a+","+r,0===l)l=1,i.getEssQuery().then(function(r){o(a,r,e).then(function(e){t.resolve(e)})});else{if(1===l)return f.push({defer:t,srcId:e}),t;if(2===l)return v?setTimeout(function(){$.map(u,function(a){+a.adPlaceId===e&&t.resolve(a.adPlaceData)})},0):t.resolve(-1),t}return t};a.exports={fetchData:m,loadKnowledgeJs:p}});